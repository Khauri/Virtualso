<!doctype html>
<html>
	<head>
		<style>
			canvas{
				margin : 5px;
				display : block;
			}
		</style>
	</head>
	<body>
		<!-- A small demo showing the use of Viano -->
		<script src="./dist/Virtualso.js"></script>
		<script>
			
			// create an array of Virtual Pianos for the tests
			let vianos = [
				{
					title : "Test Default Configurations"
				},
				{
					title : "Test No Overlapping Keys",
					noOverlap : true
				},
				{
					title : "Test Range Array ['C', 20]",
					range : ["C", 20]
				},
				{
					title : "Test Range String 'B, 20'",
					range : "b, 20"
				},
				{
					title : "Test Range Array ['C', '27']",
					range : ["C", '27']
				},
				{
					title : "Test rotation",
					width : 200,
					height : 100,
					rotation : -45,
				}
			];
			let t1, t2;
			for(let i = 0, div; i < vianos.length; i++){
				t1 = performance.now();
				vianos[i] = new Virtualso.Viano(vianos[i]);
				t2 = performance.now();

				// a few basic events handling 
				vianos[i].addEventListener("mousemove", (e) =>{
					// release all keys
					vianos[i].release("all");
					if(e.key) 
						e.key.trigger();
					vianos[i].render();
				})
				.addEventListener("mouseleave", (e)=>{ 
					vianos[i].release("all");
					vianos[i].render();
				});

				// calculate the amount of time it takes to generate
				let genPerf = (t2 - t1).toFixed(2),
					genColor = genPerf >= 15 ? "red" : "green";
				// put it all together
				div = document.createElement('div');
				div.innerHTML = `<p>${vianos[i].title || "Untitled Test"}</p> <p>Generation: <span style='color:${genColor};'>${genPerf} ms</span></p>`;
				div.appendChild(vianos[i].view);
				document.body.appendChild(div);
			}
		</script>
	</body>
</html>